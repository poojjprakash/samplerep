!function(e,t,n){if("object"==typeof n&&"string"!=typeof n.nodeName)t(e,n);else{var n={},i=["1.4.2-iab3703"],r="";function o(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=o(e[t]));return Object.freeze(e)}for(var a in r&&i.push(r),t(e,n),n)n.hasOwnProperty(a)&&(null==Object.getOwnPropertyDescriptor(e,a)&&Object.defineProperty(e,a,{value:{}}),i.forEach(function(t){if(null==Object.getOwnPropertyDescriptor(e[a],t)){var i=o(n[a]);Object.defineProperty(e[a],t,{get:function(){return i},enumerable:!0})}}))}}("undefined"==typeof global?this:global,function(omidGlobal,omidExports){"use strict";var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):$jscomp.arrayIterator(e)},$jscomp.arrayFromIterator=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},$jscomp.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch(n){}return!1},$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw TypeError(e+" is not extensible");return e}:null,$jscomp.inherits=function(e,t){if(e.prototype=$jscomp.objectCreate(t.prototype),e.prototype.constructor=e,$jscomp.setPrototypeOf){var n=$jscomp.setPrototypeOf;n(e,t)}else for(n in t)if("prototype"!=n){if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n]}e.superClass_=t.prototype};var module$exports$omid$common$constants={AdEventType:{IMPRESSION:"impression",LOADED:"loaded",GEOMETRY_CHANGE:"geometryChange",SESSION_START:"sessionStart",SESSION_ERROR:"sessionError",SESSION_FINISH:"sessionFinish",MEDIA:"media",VIDEO:"video",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction",STATE_CHANGE:"stateChange"},MediaEventType:{LOADED:"loaded",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction"},ImpressionType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",UNSPECIFIED:"unspecified",LOADED:"loaded",BEGIN_TO_RENDER:"beginToRender",ONE_PIXEL:"onePixel",VIEWABLE:"viewable",AUDIBLE:"audible",OTHER:"other"},ErrorType:{GENERIC:"generic",VIDEO:"video",MEDIA:"media"},AdSessionType:{NATIVE:"native",HTML:"html",JAVASCRIPT:"javascript"},EventOwner:{NATIVE:"native",JAVASCRIPT:"javascript",NONE:"none"},AccessMode:{FULL:"full",DOMAIN:"domain",LIMITED:"limited"},AppState:{BACKGROUNDED:"backgrounded",FOREGROUNDED:"foregrounded"},Environment:{APP:"app",WEB:"web"},DeviceCategory:{CTV:"ctv",DESKTOP:"desktop",MOBILE:"mobile",OTHER:"other"},InteractionType:{CLICK:"click",INVITATION_ACCEPT:"invitationAccept"},CreativeType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",HTML_DISPLAY:"htmlDisplay",NATIVE_DISPLAY:"nativeDisplay",VIDEO:"video",AUDIO:"audio"},MediaType:{DISPLAY:"display",VIDEO:"video"},Reason:{NOT_FOUND:"notFound",HIDDEN:"hidden",BACKGROUNDED:"backgrounded",VIEWPORT:"viewport",OBSTRUCTED:"obstructed",CLIPPED:"clipped",UNMEASURABLE:"unmeasurable",NO_WINDOW_FOCUS:"noWindowFocus",NO_OUTPUT_DEVICE:"noOutputDevice"},SupportedFeatures:{CONTAINER:"clid",VIDEO:"vlid"},VideoPosition:{PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll",STANDALONE:"standalone"},VideoPlayerState:{MINIMIZED:"minimized",COLLAPSED:"collapsed",NORMAL:"normal",EXPANDED:"expanded",FULLSCREEN:"fullscreen"},NativeViewKeys:{X:"x",LEFT:"left",Y:"y",TOP:"top",WIDTH:"width",HEIGHT:"height",AD_SESSION_ID:"adSessionId",IS_FRIENDLY_OBSTRUCTION_FOR:"isFriendlyObstructionFor",CLIPS_TO_BOUNDS:"clipsToBounds",CHILD_VIEWS:"childViews",END_X:"endX",END_Y:"endY",OBSTRUCTIONS:"obstructions",OBSTRUCTION_CLASS:"obstructionClass",OBSTRUCTION_PURPOSE:"obstructionPurpose",OBSTRUCTION_REASON:"obstructionReason",PIXELS:"pixels",HAS_WINDOW_FOCUS:"hasWindowFocus"},MeasurementStateChangeSource:{CONTAINER:"container",CREATIVE:"creative"},ElementMarkup:{OMID_ELEMENT_CLASS_NAME:"omid-element"},CommunicationType:{NONE:"NONE",DIRECT:"DIRECT",POST_MESSAGE:"POST_MESSAGE"},OmidImplementer:{OMSDK:"omsdk"}},module$contents$omid$common$InternalMessage_GUID_KEY="omid_message_guid",module$contents$omid$common$InternalMessage_METHOD_KEY="omid_message_method",module$contents$omid$common$InternalMessage_VERSION_KEY="omid_message_version",module$contents$omid$common$InternalMessage_ARGS_KEY="omid_message_args",module$exports$omid$common$InternalMessage=function(e,t,n,i){this.guid=e,this.method=t,this.version=n,this.args=i};module$exports$omid$common$InternalMessage.isValidSerializedMessage=function(e){return!!e&&void 0!==e[module$contents$omid$common$InternalMessage_GUID_KEY]&&void 0!==e[module$contents$omid$common$InternalMessage_METHOD_KEY]&&void 0!==e[module$contents$omid$common$InternalMessage_VERSION_KEY]&&"string"==typeof e[module$contents$omid$common$InternalMessage_GUID_KEY]&&"string"==typeof e[module$contents$omid$common$InternalMessage_METHOD_KEY]&&"string"==typeof e[module$contents$omid$common$InternalMessage_VERSION_KEY]&&(void 0===e[module$contents$omid$common$InternalMessage_ARGS_KEY]||void 0!==e[module$contents$omid$common$InternalMessage_ARGS_KEY])},module$exports$omid$common$InternalMessage.deserialize=function(e){return new module$exports$omid$common$InternalMessage(e[module$contents$omid$common$InternalMessage_GUID_KEY],e[module$contents$omid$common$InternalMessage_METHOD_KEY],e[module$contents$omid$common$InternalMessage_VERSION_KEY],e[module$contents$omid$common$InternalMessage_ARGS_KEY])},module$exports$omid$common$InternalMessage.prototype.serialize=function(){var e={};return e=(e[module$contents$omid$common$InternalMessage_GUID_KEY]=this.guid,e[module$contents$omid$common$InternalMessage_METHOD_KEY]=this.method,e[module$contents$omid$common$InternalMessage_VERSION_KEY]=this.version,e),void 0!==this.args&&(e[module$contents$omid$common$InternalMessage_ARGS_KEY]=this.args),e};var module$exports$omid$common$Communication=function(e){this.to=e,this.communicationType_=module$exports$omid$common$constants.CommunicationType.NONE};module$exports$omid$common$Communication.prototype.sendMessage=function(e,t){},module$exports$omid$common$Communication.prototype.handleMessage=function(e,t){this.onMessage&&this.onMessage(e,t)},module$exports$omid$common$Communication.prototype.serialize=function(e){return JSON.stringify(e)},module$exports$omid$common$Communication.prototype.deserialize=function(e){return JSON.parse(e)},module$exports$omid$common$Communication.prototype.isDirectCommunication=function(){return this.communicationType_===module$exports$omid$common$constants.CommunicationType.DIRECT},module$exports$omid$common$Communication.prototype.isCrossOrigin=function(){};var module$exports$omid$common$logger={};function module$contents$omid$common$logger_error(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];module$contents$omid$common$logger_executeLog(function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat($jscomp.arrayFromIterable(t))))},function(){return console.error.apply(console,$jscomp.arrayFromIterable(t))})}function module$contents$omid$common$logger_debug(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];module$contents$omid$common$logger_executeLog(function(){},function(){return console.error.apply(console,$jscomp.arrayFromIterable(t))})}function module$contents$omid$common$logger_executeLog(e,t){"undefined"!=typeof jasmine&&jasmine?e():"undefined"!=typeof console&&console&&console.error&&t()}module$exports$omid$common$logger.error=module$contents$omid$common$logger_error,module$exports$omid$common$logger.debug=module$contents$omid$common$logger_debug;var module$exports$omid$common$eventTypedefs={},module$exports$omid$common$version={ApiVersion:"1.0",Version:"1.4.2-iab3703"},module$exports$omid$common$argsChecker={};function module$contents$omid$common$argsChecker_assertTruthyString(e,t){if(!t)throw Error("Value for "+e+" is undefined, null or blank.");if("string"!=typeof t&&!(t instanceof String))throw Error("Value for "+e+" is not a string.");if(""===t.trim())throw Error("Value for "+e+" is empty string.")}function module$contents$omid$common$argsChecker_assertNotNullObject(e,t){if(null==t)throw Error("Value for "+e+" is undefined or null")}function module$contents$omid$common$argsChecker_assertNumber(e,t){if(null==t)throw Error(e+" must not be null or undefined.");if("number"!=typeof t||isNaN(t))throw Error("Value for "+e+" is not a number")}function module$contents$omid$common$argsChecker_assertNumberBetween(e,t,n,i){if(module$contents$omid$common$argsChecker_assertNumber(e,t),t<n||t>i)throw Error("Value for "+e+" is outside the range ["+n+","+i+"]")}function module$contents$omid$common$argsChecker_assertFunction(e,t){if(!t)throw Error(e+" must not be truthy.")}function module$contents$omid$common$argsChecker_assertPositiveNumber(e,t){if(module$contents$omid$common$argsChecker_assertNumber(e,t),0>t)throw Error(e+" must be a positive number.")}module$exports$omid$common$argsChecker.assertTruthyString=module$contents$omid$common$argsChecker_assertTruthyString,module$exports$omid$common$argsChecker.assertNotNullObject=module$contents$omid$common$argsChecker_assertNotNullObject,module$exports$omid$common$argsChecker.assertNumber=module$contents$omid$common$argsChecker_assertNumber,module$exports$omid$common$argsChecker.assertNumberBetween=module$contents$omid$common$argsChecker_assertNumberBetween,module$exports$omid$common$argsChecker.assertFunction=module$contents$omid$common$argsChecker_assertFunction,module$exports$omid$common$argsChecker.assertPositiveNumber=module$contents$omid$common$argsChecker_assertPositiveNumber;var module$exports$omid$common$VersionUtils={},module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER=3;function module$contents$omid$common$VersionUtils_isValidVersion(e){return/\d+\.\d+\.\d+(-.*)?/.test(e)}function module$contents$omid$common$VersionUtils_versionGreaterOrEqual(e,t){e=e.split("-")[0].split("."),t=t.split("-")[0].split(".");for(var n=0;n<module$contents$omid$common$VersionUtils_SEMVER_DIGITS_NUMBER;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)break;if(i<r)return!1}return!0}module$exports$omid$common$VersionUtils.isValidVersion=module$contents$omid$common$VersionUtils_isValidVersion,module$exports$omid$common$VersionUtils.versionGreaterOrEqual=module$contents$omid$common$VersionUtils_versionGreaterOrEqual;var module$exports$omid$common$ArgsSerDe={},module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION="1.0.3";function module$contents$omid$common$ArgsSerDe_serializeMessageArgs(e,t){return module$contents$omid$common$VersionUtils_isValidVersion(e)&&module$contents$omid$common$VersionUtils_versionGreaterOrEqual(e,module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION)?t:JSON.stringify(t)}function module$contents$omid$common$ArgsSerDe_deserializeMessageArgs(e,t){return module$contents$omid$common$VersionUtils_isValidVersion(e)&&module$contents$omid$common$VersionUtils_versionGreaterOrEqual(e,module$contents$omid$common$ArgsSerDe_ARGS_NOT_SERIALIZED_VERSION)?t||[]:t&&"string"==typeof t?JSON.parse(t):[]}module$exports$omid$common$ArgsSerDe.serializeMessageArgs=module$contents$omid$common$ArgsSerDe_serializeMessageArgs,module$exports$omid$common$ArgsSerDe.deserializeMessageArgs=module$contents$omid$common$ArgsSerDe_deserializeMessageArgs;var module$exports$omid$common$guid={};function module$contents$omid$common$guid_generateGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return e="y"===e?(3&t|8).toString(16):t.toString(16)})}module$exports$omid$common$guid.generateGuid=module$contents$omid$common$guid_generateGuid;var module$exports$omid$common$serviceMethodUtils={},module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix={SESSION_SERVICE:"SessionService.",VERIFICATION_SERVICE:"VerificationService."};function module$contents$omid$common$serviceMethodUtils_getPrefixedSessionServiceMethod(e){return module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(e,module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.SESSION_SERVICE)}function module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod(e){return module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(e,module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.SESSION_SERVICE)}function module$contents$omid$common$serviceMethodUtils_isPrefixedSessionServiceMethod(e){return null!=module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod(e)}function module$contents$omid$common$serviceMethodUtils_getPrefixedVerificationServiceMethod(e){return module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(e,module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.VERIFICATION_SERVICE)}function module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod(e){return module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(e,module$contents$omid$common$serviceMethodUtils_ServiceMethodPrefix.VERIFICATION_SERVICE)}function module$contents$omid$common$serviceMethodUtils_isPrefixedVerificationServiceMethod(e){return null!=module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod(e)}function module$contents$omid$common$serviceMethodUtils_getPrefixedMethod(e,t){return t+e}function module$contents$omid$common$serviceMethodUtils_getUnprefixedMethod(e,t){return(e=e.match(RegExp("^"+t+"(.*)")))&&e[1]}module$exports$omid$common$serviceMethodUtils.getPrefixedSessionServiceMethod=module$contents$omid$common$serviceMethodUtils_getPrefixedSessionServiceMethod,module$exports$omid$common$serviceMethodUtils.getPrefixedVerificationServiceMethod=module$contents$omid$common$serviceMethodUtils_getPrefixedVerificationServiceMethod,module$exports$omid$common$serviceMethodUtils.getUnprefixedSessionServiceMethod=module$contents$omid$common$serviceMethodUtils_getUnprefixedSessionServiceMethod,module$exports$omid$common$serviceMethodUtils.getUnprefixedVerificationServiceMethod=module$contents$omid$common$serviceMethodUtils_getUnprefixedVerificationServiceMethod,module$exports$omid$common$serviceMethodUtils.isPrefixedSessionServiceMethod=module$contents$omid$common$serviceMethodUtils_isPrefixedSessionServiceMethod,module$exports$omid$common$serviceMethodUtils.isPrefixedVerificationServiceMethod=module$contents$omid$common$serviceMethodUtils_isPrefixedVerificationServiceMethod;var module$exports$omid$common$OmidGlobalProvider={};function module$contents$omid$common$OmidGlobalProvider_getOmidGlobal(){if(void 0!==omidGlobal&&omidGlobal)return omidGlobal;if("undefined"!=typeof global&&global)return global;if("undefined"!=typeof window&&window)return window;if("undefined"!=typeof globalThis&&globalThis)return globalThis;var e=Function("return this")();if(e)return e;throw Error("Could not determine global object context.")}module$exports$omid$common$OmidGlobalProvider.omidGlobal=module$contents$omid$common$OmidGlobalProvider_getOmidGlobal();var module$exports$omid$common$exporter={};function module$contents$omid$common$exporter_getOmidExports(){return void 0===omidExports?null:omidExports}function module$contents$omid$common$exporter_getOrCreateName(e,t){return e&&(e[t]||(e[t]={}))}function module$contents$omid$common$exporter_packageExport(e,t,n){(n=void 0===n?module$contents$omid$common$exporter_getOmidExports():n)&&((e=e.split(".")).slice(0,e.length-1).reduce(module$contents$omid$common$exporter_getOrCreateName,n)[e[e.length-1]]=t)}module$exports$omid$common$exporter.packageExport=module$contents$omid$common$exporter_packageExport;var module$exports$omid$common$windowUtils={};function module$contents$omid$common$windowUtils_isValidWindow(e){return null!=e&&void 0!==e.top&&null!=e.top}function module$contents$omid$common$windowUtils_isCrossOrigin(e){if(e===module$exports$omid$common$OmidGlobalProvider.omidGlobal)return!1;try{if(void 0===e.location.hostname)return!0;module$contents$omid$common$windowUtils_isSameOriginForIE(e)}catch(t){return!0}return!1}function module$contents$omid$common$windowUtils_isSameOriginForIE(e){return""===e.x||""!==e.x}function module$contents$omid$common$windowUtils_resolveGlobalContext(e){return void 0===e&&"undefined"!=typeof window&&window&&(e=window),module$contents$omid$common$windowUtils_isValidWindow(e)?e:module$exports$omid$common$OmidGlobalProvider.omidGlobal}function module$contents$omid$common$windowUtils_resolveTopWindowContext(e){return module$contents$omid$common$windowUtils_isValidWindow(e)?e.top:module$exports$omid$common$OmidGlobalProvider.omidGlobal}function module$contents$omid$common$windowUtils_isTopWindowAccessible(e){try{return!!e.top.location.href}catch(t){return!1}}function module$contents$omid$common$windowUtils_removeDomElements(e){return e.type===module$exports$omid$common$constants.AdEventType.SESSION_START&&(void 0!==e.data.context.videoElement&&(e.data.context.videoElement="DOM Video Element - Present but not parsed to avoid parse error"),void 0!==e.data.context.slotElement&&(e.data.context.slotElement="DOM Slot Element - Present but not parsed to avoid parse error")),e}function module$contents$omid$common$windowUtils_evaluatePageUrl(e){if(!module$contents$omid$common$windowUtils_isValidWindow(e))return null;try{var t=e.top;return module$contents$omid$common$windowUtils_isCrossOrigin(t)?null:t.location.href}catch(n){return null}}module$exports$omid$common$windowUtils.evaluatePageUrl=module$contents$omid$common$windowUtils_evaluatePageUrl,module$exports$omid$common$windowUtils.isCrossOrigin=module$contents$omid$common$windowUtils_isCrossOrigin,module$exports$omid$common$windowUtils.removeDomElements=module$contents$omid$common$windowUtils_removeDomElements,module$exports$omid$common$windowUtils.resolveGlobalContext=module$contents$omid$common$windowUtils_resolveGlobalContext,module$exports$omid$common$windowUtils.resolveTopWindowContext=module$contents$omid$common$windowUtils_resolveTopWindowContext,module$exports$omid$common$windowUtils.isTopWindowAccessible=module$contents$omid$common$windowUtils_isTopWindowAccessible;var module$exports$omid$common$DirectCommunication=function(e){module$exports$omid$common$Communication.call(this,e),this.communicationType_=module$exports$omid$common$constants.CommunicationType.DIRECT,this.handleExportedMessage=module$exports$omid$common$DirectCommunication.prototype.handleExportedMessage.bind(this)};$jscomp.inherits(module$exports$omid$common$DirectCommunication,module$exports$omid$common$Communication),module$exports$omid$common$DirectCommunication.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.handleExportedMessage(e.serialize(),this)},module$exports$omid$common$DirectCommunication.prototype.handleExportedMessage=function(e,t){module$exports$omid$common$InternalMessage.isValidSerializedMessage(e)&&this.handleMessage(module$exports$omid$common$InternalMessage.deserialize(e),t)},module$exports$omid$common$DirectCommunication.prototype.isCrossOrigin=function(){return!1};var module$exports$omid$common$PostMessageCommunication=function(e,t){t=void 0===t?module$exports$omid$common$OmidGlobalProvider.omidGlobal:t,module$exports$omid$common$Communication.call(this,t);var n=this;this.communicationType_=module$exports$omid$common$constants.CommunicationType.POST_MESSAGE,e.addEventListener("message",function(e){if("object"==typeof e.data){var t=e.data;module$exports$omid$common$InternalMessage.isValidSerializedMessage(t)&&(t=module$exports$omid$common$InternalMessage.deserialize(t),e.source&&n.handleMessage(t,e.source))}})};$jscomp.inherits(module$exports$omid$common$PostMessageCommunication,module$exports$omid$common$Communication),module$exports$omid$common$PostMessageCommunication.isCompatibleContext=function(e){return!!(e&&e.addEventListener&&e.postMessage)},module$exports$omid$common$PostMessageCommunication.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.postMessage(e.serialize(),"*")},module$exports$omid$common$PostMessageCommunication.prototype.isCrossOrigin=function(){return!this.to||module$contents$omid$common$windowUtils_isCrossOrigin(this.to)};var module$exports$omid$common$DetectOmid={OMID_PRESENT_FRAME_NAME:"omid_v1_present",isOmidPresent:function(e){try{return!!e.frames&&!!e.frames[module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME]}catch(t){return!1}},declareOmidPresence:function(e){e.frames&&e.document&&(module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME in e.frames||(null==e.document.body&&module$exports$omid$common$DetectOmid.isMutationObserverAvailable_(e)?module$exports$omid$common$DetectOmid.registerMutationObserver_(e):e.document.body?module$exports$omid$common$DetectOmid.appendPresenceIframe_(e):e.document.write('<iframe style="display:none" id="'+module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME+'" name="'+module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME+'"></iframe>')))},appendPresenceIframe_:function(e){var t=e.document.createElement("iframe");t.id=module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME,t.name=module$exports$omid$common$DetectOmid.OMID_PRESENT_FRAME_NAME,t.style.display="none",e.document.body.appendChild(t)},isMutationObserverAvailable_:function(e){return"MutationObserver"in e},registerMutationObserver_:function(e){var t=new MutationObserver(function(n){n.forEach(function(n){"BODY"===n.addedNodes[0].nodeName&&(module$exports$omid$common$DetectOmid.appendPresenceIframe_(e),t.disconnect())})});t.observe(e.document.documentElement,{childList:!0})}},module$exports$omid$common$serviceCommunication={},module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME=["omid","v1_SessionServiceCommunication"],module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME=["omid","v1_VerificationServiceCommunication"],module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME=["omidVerificationProperties","serviceWindow"];function module$contents$omid$common$serviceCommunication_getValueForKeypath(e,t){return t.reduce(function(e,t){return e&&e[t]},e)}function module$contents$omid$common$serviceCommunication_startServiceCommunication(e,t,n,i){if(!module$contents$omid$common$windowUtils_isCrossOrigin(t))try{var r=module$contents$omid$common$serviceCommunication_getValueForKeypath(t,n);if(r)return new module$exports$omid$common$DirectCommunication(r)}catch(o){}return i(t)?new module$exports$omid$common$PostMessageCommunication(e,t):null}function module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(e,t,n,i){t=$jscomp.makeIterator(t);for(var r=t.next();!r.done;r=t.next())if(r=module$contents$omid$common$serviceCommunication_startServiceCommunication(e,r.value,n,i))return r;return null}function module$contents$omid$common$serviceCommunication_startSessionServiceCommunication(e,t,n){n=void 0===n?module$exports$omid$common$DetectOmid.isOmidPresent:n;var i=[e,module$contents$omid$common$windowUtils_resolveTopWindowContext(e)];return t&&i.unshift(t),module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(e,i,module$contents$omid$common$serviceCommunication_EXPORTED_SESSION_COMMUNICATION_NAME,n)}function module$contents$omid$common$serviceCommunication_startVerificationServiceCommunication(e,t){t=void 0===t?module$exports$omid$common$DetectOmid.isOmidPresent:t;var n=[],i=module$contents$omid$common$serviceCommunication_getValueForKeypath(e,module$contents$omid$common$serviceCommunication_EXPORTED_SERVICE_WINDOW_NAME);return i&&n.push(i),n.push(module$contents$omid$common$windowUtils_resolveTopWindowContext(e)),module$contents$omid$common$serviceCommunication_startServiceCommunicationFromCandidates(e,n,module$contents$omid$common$serviceCommunication_EXPORTED_VERIFICATION_COMMUNICATION_NAME,t)}module$exports$omid$common$serviceCommunication.startSessionServiceCommunication=module$contents$omid$common$serviceCommunication_startSessionServiceCommunication,module$exports$omid$common$serviceCommunication.startVerificationServiceCommunication=module$contents$omid$common$serviceCommunication_startVerificationServiceCommunication;var module$contents$omid$verificationClient$VerificationClient_EventCallback,module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION=module$exports$omid$common$version.Version;function module$contents$omid$verificationClient$VerificationClient_getThirdPartyOmid(){var e=module$exports$omid$common$OmidGlobalProvider.omidGlobal.omid3p;return e&&"function"==typeof e.registerSessionObserver&&"function"==typeof e.addEventListener?e:null}var module$exports$omid$verificationClient$VerificationClient=function(e){(this.communication=e||module$contents$omid$common$serviceCommunication_startVerificationServiceCommunication(module$contents$omid$common$windowUtils_resolveGlobalContext()))?this.communication.onMessage=this.handleMessage_.bind(this):(e=module$contents$omid$verificationClient$VerificationClient_getThirdPartyOmid())&&(this.omid3p=e),this.remoteIntervals_=this.remoteTimeouts_=0,this.callbackMap_={},this.imgCache_=[],this.injectionId_=(e=module$exports$omid$common$OmidGlobalProvider.omidGlobal.omidVerificationProperties)?e.injectionId:void 0};module$exports$omid$verificationClient$VerificationClient.prototype.isSupported=function(){return!(!this.communication&&!this.omid3p)},module$exports$omid$verificationClient$VerificationClient.prototype.injectionSource=function(){var e=module$exports$omid$common$OmidGlobalProvider.omidGlobal.omidVerificationProperties;if(e&&e.injectionSource)return e.injectionSource},module$exports$omid$verificationClient$VerificationClient.prototype.registerSessionObserver=function(e,t){module$contents$omid$common$argsChecker_assertFunction("functionToExecute",e),this.omid3p?this.omid3p.registerSessionObserver(e,t,this.injectionId_):this.sendMessage_("addSessionListener",e,t,this.injectionId_)},module$exports$omid$verificationClient$VerificationClient.prototype.addEventListener=function(e,t){module$contents$omid$common$argsChecker_assertTruthyString("eventType",e),module$contents$omid$common$argsChecker_assertFunction("functionToExecute",t),this.omid3p?this.omid3p.addEventListener(e,t,this.injectionId_):this.sendMessage_("addEventListener",t,e,this.injectionId_)},module$exports$omid$verificationClient$VerificationClient.prototype.sendUrl=function(e,t,n){module$contents$omid$common$argsChecker_assertTruthyString("url",e),module$exports$omid$common$OmidGlobalProvider.omidGlobal.document&&module$exports$omid$common$OmidGlobalProvider.omidGlobal.document.createElement?this.sendUrlWithImg_(e,t,n):this.sendMessage_("sendUrl",function(e){e&&t?t():!e&&n&&n()},e)},module$exports$omid$verificationClient$VerificationClient.prototype.sendUrlWithImg_=function(e,t,n){var i=this,r=module$exports$omid$common$OmidGlobalProvider.omidGlobal.document.createElement("img");this.imgCache_.push(r);var o=function(e){var t=i.imgCache_.indexOf(r);0<=t&&i.imgCache_.splice(t,1),e&&e()};r.addEventListener("load",o.bind(this,t)),r.addEventListener("error",o.bind(this,n)),r.src=e},module$exports$omid$verificationClient$VerificationClient.prototype.injectJavaScriptResource=function(e,t,n){var i=this;module$contents$omid$common$argsChecker_assertTruthyString("url",e),module$exports$omid$common$OmidGlobalProvider.omidGlobal.document?this.injectJavascriptResourceUrlInDom_(e,t,n):this.sendMessage_("injectJavaScriptResource",function(r,o){r?(i.evaluateJavaScript_(o,e),t()):(module$contents$omid$common$logger_error("Service failed to load JavaScript resource."),n())},e)},module$exports$omid$verificationClient$VerificationClient.prototype.injectJavascriptResourceUrlInDom_=function(e,t,n){var i=module$exports$omid$common$OmidGlobalProvider.omidGlobal.document,r=i.body;(i=i.createElement("script")).onload=t,i.onerror=n,i.src=e,i.type="application/javascript",r.appendChild(i)},module$exports$omid$verificationClient$VerificationClient.prototype.evaluateJavaScript_=function(a,b){try{eval(a)}catch(c){module$contents$omid$common$logger_error('Error evaluating the JavaScript resource from "'+b+'".')}},module$exports$omid$verificationClient$VerificationClient.prototype.setTimeout=function(e,t){if(module$contents$omid$common$argsChecker_assertFunction("functionToExecute",e),module$contents$omid$common$argsChecker_assertPositiveNumber("timeInMillis",t),this.hasTimeoutMethods_())return module$exports$omid$common$OmidGlobalProvider.omidGlobal.setTimeout(e,t);var n=this.remoteTimeouts_++;return this.sendMessage_("setTimeout",e,n,t),n},module$exports$omid$verificationClient$VerificationClient.prototype.clearTimeout=function(e){module$contents$omid$common$argsChecker_assertPositiveNumber("timeoutId",e),this.hasTimeoutMethods_()?module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearTimeout(e):this.sendOneWayMessage_("clearTimeout",e)},module$exports$omid$verificationClient$VerificationClient.prototype.setInterval=function(e,t){if(module$contents$omid$common$argsChecker_assertFunction("functionToExecute",e),module$contents$omid$common$argsChecker_assertPositiveNumber("timeInMillis",t),this.hasIntervalMethods_())return module$exports$omid$common$OmidGlobalProvider.omidGlobal.setInterval(e,t);var n=this.remoteIntervals_++;return this.sendMessage_("setInterval",e,n,t),n},module$exports$omid$verificationClient$VerificationClient.prototype.clearInterval=function(e){module$contents$omid$common$argsChecker_assertPositiveNumber("intervalId",e),this.hasIntervalMethods_()?module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearInterval(e):this.sendOneWayMessage_("clearInterval",e)},module$exports$omid$verificationClient$VerificationClient.prototype.hasTimeoutMethods_=function(){return"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.setTimeout&&"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearTimeout},module$exports$omid$verificationClient$VerificationClient.prototype.hasIntervalMethods_=function(){return"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.setInterval&&"function"==typeof module$exports$omid$common$OmidGlobalProvider.omidGlobal.clearInterval},module$exports$omid$verificationClient$VerificationClient.prototype.handleMessage_=function(e,t){t=e.method;var n=e.guid;if(e=e.args,"response"===t&&this.callbackMap_[n]){var i=module$contents$omid$common$ArgsSerDe_deserializeMessageArgs(module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,e);this.callbackMap_[n].apply(this,i)}"error"===t&&window.console&&module$contents$omid$common$logger_error(e)},module$exports$omid$verificationClient$VerificationClient.prototype.sendOneWayMessage_=function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];this.sendMessage_.apply(this,[e,null].concat($jscomp.arrayFromIterable(n)))},module$exports$omid$verificationClient$VerificationClient.prototype.sendMessage_=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];this.communication&&(r=module$contents$omid$common$guid_generateGuid(),t&&(this.callbackMap_[r]=t),i=new module$exports$omid$common$InternalMessage(r,module$contents$omid$common$serviceMethodUtils_getPrefixedVerificationServiceMethod(e),module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,module$contents$omid$common$ArgsSerDe_serializeMessageArgs(module$contents$omid$verificationClient$VerificationClient_VERIFICATION_CLIENT_VERSION,i)),this.communication.sendMessage(i))},module$contents$omid$common$exporter_packageExport("OmidVerificationClient",module$exports$omid$verificationClient$VerificationClient)},"undefined"==typeof exports?void 0:exports);